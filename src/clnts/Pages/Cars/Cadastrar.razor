@page "/cadastrar"
@inject ParkedController parkingService

    <div>
        <h1>Single file</h1>

        <p>A single file input that uploads automatically on file selection</p>

        <div class="btn btn-primary">
            
            <InputFile OnChange="HandleSelection"/>

        </div>

        <p>@status</p>

        @if(!String.IsNullOrEmpty(imageData))
        {
            <img src="@imageData" height="250"/>
        }

    </div>



@code {
    string status;

    string imageData = String.Empty;

    async Task HandleSelection(IFileListEntry[] files)
    {
        var file = files.FirstOrDefault();      

        if (file != null)
        {
            var ms = new MemoryStream();

            await file.Data.CopyToAsync(ms);

            status = $"Upload concluido, {file.Size} bytes.s";

            imageData = $"data:image/jpg;base64,{Convert.ToBase64String(ms.ToArray())}";
        }


    }


}